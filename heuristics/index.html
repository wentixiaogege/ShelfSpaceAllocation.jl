<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Heuristics · ShelfSpaceAllocation</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.svg" alt="ShelfSpaceAllocation logo"/></a><h1>ShelfSpaceAllocation</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../plotting/">Plotting</a></li><li class="current"><a class="toctext" href>Heuristics</a><ul class="internal"><li><a class="toctext" href="#Definitions-1">Definitions</a></li><li><a class="toctext" href="#Relax-and-Fix-1">Relax-and-Fix</a></li><li><a class="toctext" href="#Fix-and-Optimize-1">Fix-and-Optimize</a></li><li><a class="toctext" href="#Example-1">Example</a></li><li><a class="toctext" href="#References-1">References</a></li></ul></li><li><a class="toctext" href="../api/">API</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Heuristics</a></li></ul><a class="edit-page" href="https://github.com/jaantollander/ShelfSpaceAllocation/blob/master/docs/src/heuristics.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Heuristics</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Heuristics-1" href="#Heuristics-1">Heuristics</a></h1><div class="admonition warning"><div class="admonition-title">Warning</div><div class="admonition-text"><p>Currently, heuristics are in an experimental state. Heuristics are tested only on a single instance. Therefore it cannot be guaranteed that they will obtain good results in all instances. Heuristics can be found at: <code>examples/heuristics.jl</code></p></div></div><p>Solving a mixed-integer linear program can be computationally difficult and integer programming is indeed NP-complete problem. Heuristics can be used to obtain feasible solutions and improving them faster than using deterministic algorithms by trading off some accuracy. Also, heuristics are not guaranteed to obtain good solutions. Two heuristics, <em>relax-and-fix</em> and <em>fix-and-optimize</em>, are covered here. In the literature, they are referred to as <em>MIP-based heuristics</em>, a type of metaheuristics. <a href="#footnote-Wolsey1998">[Wolsey1998]</a></p><h2><a class="nav-anchor" id="Definitions-1" href="#Definitions-1">Definitions</a></h2><p>Definitions in the context of linear programming heuristics.</p><ul><li><p><em>Relaxation</em> means removing integrality constraint from a variable.</p></li><li><p><em>Fixing</em> variable means setting a fixed value for a variable.</p></li></ul><h2><a class="nav-anchor" id="Relax-and-Fix-1" href="#Relax-and-Fix-1">Relax-and-Fix</a></h2><p>The goal of relax-and-fix heuristic is to find reasonably good feasible solutions fast. These solutions can be later improved with the fix-and-optimize heuristic.</p><p>The main design decision for relax-and-fix heuristic is choosing which variables will be relaxed. For shelf space allocation model the main options are the integer variables for number of facings <span>$n_{p,s}$</span> and binary variables for block-shelf allocation <span>$z_{b,s}$</span>, <span>$z_{b,s}^f$</span> and <span>$z_{b,s}^l$</span>. Testing indicated that relaxation of block-shelf allocation variables is a much better choice because the reduction to the computational time was much larger compared when using variables for number of facings.</p><p>Block-shelf allocation variables have two indices, blocks <span>$b$</span> and shelves <span>$s$</span>. The most logical choice is to partition the variables by the blocks. This is done by partitioning the set of blocks <span>$B$</span> into <span>$n$</span> disjoint subsets <span>$B_1, B_2, ..., B_n$</span>. This also determines the order in which the variables are relaxed. Partitioning affects the runtime and goodness of the heuristic solution. The optimal way to partition is still unknown to us and partitioning policy is a user decision.</p><div class="admonition example"><div class="admonition-title">Example</div><div class="admonition-text"><p>For example, <span>$B_1$</span> could be partition to contain two blocks that are predicted to have most items allocated to the shelves, then partition <span>$B_2$</span> to contain two blocks that are predicted to have second-most items allocated to the shelves and so forth.</p></div></div><p>Relax-and-fix heuristic. Start the iteration counter from <span>$i=1$</span>.</p><ol><li><em>Relax</em>. Solve the relaxed shelf space allocation model where</li></ol><div>\[\begin{aligned}
&amp; z_{b,s}, z_{b,s}^f, z_{b,s}^l∈\{0,1\}, &amp; b∈B_i, ∀s \\
&amp; z_{b,s}, z_{b,s}^f, z_{b,s}^l∈[0,1], &amp; b∈B_{i+1}∪B_{i+2}∪...∪B_n, ∀s.
\end{aligned}\]</div><ol><li><p><em>Fix</em>. Fix the variables <span>$z_{b,s}, z_{b,s}^f, z_{b,s}^l$</span> for blocks <span>$b∈B_i$</span> and forall shelves <span>$s$</span> at their values.</p></li><li><p>If iteration counter is <span>$i=n$</span> return the solution. Otherwise, increment the iteration counter <span>$i$</span> by one and repeat from step 1.</p></li></ol><p>The block-shelf variables will be relaxed by a subset of blocks at a time. This transforms the original problem into one where all the blocks are not being allocated at the same time but one subset of blocks at a time.</p><h2><a class="nav-anchor" id="Fix-and-Optimize-1" href="#Fix-and-Optimize-1">Fix-and-Optimize</a></h2><p>The goal of fix-and-optimize heuristic is to improve the existing feasible solution, for example, one obtained from relax-and-fix heuristic. Fix-and-optimize heuristic operates by fixing a part of the variables to the values in the existing solution and making the other variables unfixed and then performing the optimization.</p><p>For the shelf space allocation model, the block-shelf allocation variables were chosen as the target variables because they have the largest impact on the computational time. The simplest form of fix-and-optimize is to fix all of the target variables, which is used here. More intelligent strategies where only a part of the target variables are fixed could be beneficial for large instances, but this remains as a research question.</p><h2><a class="nav-anchor" id="Example-1" href="#Example-1">Example</a></h2><p><img src="../figures/planogram_no_blocks.svg" alt/></p><p>First, the shelf space allocation model is solved without the block constraints. It&#39;s very fast to solve and gives us a good starting point for setting the parameters for the heuristic.</p><p><img src="../figures/fill_amount_no_blocks.svg" alt/></p><p>Compute the absolute amount of products allocated on the shelves per block. Sort the blocks from most items allocated to least items allocated. Partition these indices into sets of chosen size. For example, in this case the sorted sequence of blocks is <span>$(7, 1, 2, 6, 4, 8, 9, 3, 5)$</span> and they are partitioned into four sets <span>$B_1=\{7, 1\}$</span>, <span>$B_2=\{2, 6\}$</span>, <span>$B_3=\{4, 8\}$</span> and <span>$B_4=\{9, 3, 5\}$</span>.</p><p>This means that relax-and-fix heuristic will perform four iterations</p><p>Next figures visualize which block allocation variables <span>$z_{b,s}, z_{b,s}^f, z_{b,s}^l$</span> are fixed, binary and relaxed in each iteration.</p><p><img src="../figures/heuristics/relax-and-fix-iteration-1.svg" alt/></p><p>Relax-and-fix iteration 1:</p><ul><li>Fixed: <span>$b∈∅$</span></li><li>Binary: <span>$b∈B_1$</span></li><li>Relaxed: <span>$b∈B_2∪B_3∪B_4$</span></li></ul><p><img src="../figures/heuristics/relax-and-fix-iteration-2.svg" alt/></p><p>Relax-and-fix iteration 2:</p><ul><li>Fixed: <span>$b∈B_1$</span></li><li>Binary: <span>$b∈B_2$</span></li><li>Relaxed: <span>$b∈B_3∪B_4$</span></li></ul><p><img src="../figures/heuristics/relax-and-fix-iteration-3.svg" alt/></p><p>Relax-and-fix iteration 3:</p><ul><li>Fixed: <span>$b∈B_1∪B_2$</span></li><li>Binary: <span>$b∈B_3$</span></li><li>Relaxed: <span>$b∈B_4$</span></li></ul><p><img src="../figures/heuristics/relax-and-fix-iteration-4.svg" alt/></p><p>Relax-and-fix iteration 4:</p><ul><li>Fixed: <span>$b∈B_1∪B_2∪B_3$</span></li><li>Binary: <span>$b∈B_4$</span></li><li>Relaxed: <span>$b∈∅$</span></li></ul><p><img src="../figures/heuristics/fix-and-optimize.svg" alt/></p><p>The final solution is obtained by running the fix-and-optimize heuristic on the solution obtained by relax-and-fix. In this case, all block-shelf allocation variables <span>$z_{b,s}, z_{b,s}^f, z_{b,s}^l$</span> and block-block relative order variables <span>$w_{b,b′}$</span> were fixed at their values.</p><h2><a class="nav-anchor" id="References-1" href="#References-1">References</a></h2><div class="footnote" id="footnote-Wolsey1998"><a href="#footnote-Wolsey1998"><strong>[Wolsey1998]</strong></a><p>Wolsey, L. A. (1998). Integer programming. Wiley.</p></div><footer><hr/><a class="previous" href="../plotting/"><span class="direction">Previous</span><span class="title">Plotting</span></a><a class="next" href="../api/"><span class="direction">Next</span><span class="title">API</span></a></footer></article></body></html>
